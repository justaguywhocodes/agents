{
  "name": "repo_analysis_v1",
  "version": "1.0.0",
  "description": "Heavy context stress tests that clone external repositories and perform exhaustive analysis. These tasks generate 50K+ tokens and require many iterations to complete.",
  "default_eval_criteria": ["clone_success", "completeness", "analysis_depth", "synthesis_quality"],
  "categories": ["context_stress", "documentation", "code_review", "architecture"],
  "metadata": {
    "purpose": "Stress test context compaction with real-world repository analysis tasks",
    "min_recommended_budget": 50000,
    "requires_network": true,
    "warning": "These tasks clone external repositories and may take significant time/tokens"
  },
  "tasks": [
    {
      "id": "repo_documentation",
      "name": "Repository Documentation Generation",
      "prompt": "Clone the repository https://github.com/microsoft-foundry/ai-tutorials and generate comprehensive documentation.\n\nSTEP 1: Clone the repository\n- Use bash to clone: git clone https://github.com/microsoft-foundry/ai-tutorials\n- Confirm the clone succeeded by listing the directory contents\n\nSTEP 2: Explore the structure\n- List all files and directories recursively\n- Identify the main components, tutorials, and examples\n\nSTEP 3: Generate documentation\nFor EVERY file in the repository:\n1. Read the complete file\n2. Document its purpose (1-2 sentences)\n3. List key functions/classes if code, or sections if markdown\n4. Note dependencies or prerequisites\n\nSTEP 4: Create a comprehensive report\n- Overall repository purpose and structure\n- Table of contents of all tutorials/examples\n- Prerequisites for running each tutorial\n- Suggested learning path for beginners\n\nBe thorough. Read every file completely. Document everything.",
      "category": "context_stress",
      "eval_criteria": ["clone_success", "file_coverage", "documentation_quality", "synthesis"],
      "rubric": {
        "clone_success": "10: Repository was successfully cloned. 0: Clone failed.",
        "file_coverage": "10: All files in the repository were read and documented. 5: Most files documented. 0: Few files documented.",
        "documentation_quality": "10: Each file has meaningful description, not just filenames. 5: Basic descriptions. 0: Just file listing.",
        "synthesis": "10: Final report provides useful overview and learning path. 5: Basic summary. 0: No synthesis."
      },
      "expected_iterations": 20,
      "min_files_to_read": 25,
      "target_context_tokens": 50000,
      "metadata": {
        "min_tokens": 50000,
        "requires_git": true
      }
    },
    {
      "id": "code_review",
      "name": "Exhaustive Code Review",
      "prompt": "Clone https://github.com/microsoft-foundry/ai-tutorials and perform an exhaustive code review.\n\nSTEP 1: Clone the repository\n- git clone https://github.com/microsoft-foundry/ai-tutorials\n- Verify the clone succeeded\n\nSTEP 2: Inventory all code files\n- Find all Python files (.py)\n- Find all Jupyter notebooks (.ipynb)\n- Find all configuration files\n\nSTEP 3: Review each code file\nFor EVERY Python file and notebook:\n1. Read the complete file\n2. For each function/method, document:\n   - Name and signature\n   - What it does (1-2 sentences)\n   - Any potential issues (edge cases, missing error handling)\n3. For each class, document:\n   - Purpose\n   - All methods with their purposes\n\nSTEP 4: Synthesize findings\n- Summary table of all modules and their relationships\n- Top 10 code quality issues found\n- Recommendations for improvement\n- Best practices observed worth replicating\n\nRead every file. Be thorough and systematic.",
      "category": "code_review",
      "eval_criteria": ["clone_success", "completeness", "depth", "issues_found"],
      "rubric": {
        "clone_success": "10: Repository was successfully cloned. 0: Clone failed.",
        "completeness": "10: All code files were read and reviewed. 5: Most files reviewed. 0: Few files reviewed.",
        "depth": "10: Each function/class has meaningful analysis, not just signatures. 5: Basic analysis. 0: Just signatures.",
        "issues_found": "10: Identified real code quality issues with specific examples. 5: Generic issues. 0: No issues found."
      },
      "expected_iterations": 22,
      "min_files_to_read": 30,
      "target_context_tokens": 55000,
      "metadata": {
        "min_tokens": 55000,
        "requires_git": true
      }
    },
    {
      "id": "tutorial_analysis",
      "name": "Tutorial Educational Analysis",
      "prompt": "Clone https://github.com/microsoft-foundry/ai-tutorials and analyze the tutorial content for educational effectiveness.\n\nSTEP 1: Clone the repository\n- git clone https://github.com/microsoft-foundry/ai-tutorials\n- List the repository contents to understand structure\n\nSTEP 2: Read ALL tutorials\nFor EACH tutorial or example:\n1. Read the complete content\n2. Identify the learning objectives\n3. List prerequisites assumed\n4. Note the teaching approach used\n\nSTEP 3: Evaluate educational quality\nFor each tutorial, assess:\n- Clarity of explanations\n- Code-to-explanation ratio\n- Progression of difficulty\n- Hands-on exercises included\n- Common pitfalls addressed\n\nSTEP 4: Create improvement report\n- Rank tutorials by educational effectiveness\n- Identify gaps in coverage\n- Suggest specific improvements for each tutorial\n- Recommend additional tutorials that should be added\n- Create an optimal learning sequence\n\nBe thorough. Read every file. Provide specific examples.",
      "category": "documentation",
      "eval_criteria": ["clone_success", "tutorial_coverage", "evaluation_depth", "actionable_recommendations"],
      "rubric": {
        "clone_success": "10: Repository was successfully cloned. 0: Clone failed.",
        "tutorial_coverage": "10: All tutorials were read and analyzed. 5: Most tutorials analyzed. 0: Few tutorials analyzed.",
        "evaluation_depth": "10: Evaluation criteria applied consistently across tutorials. 5: Inconsistent evaluation. 0: No real evaluation.",
        "actionable_recommendations": "10: Improvement suggestions are specific and implementable. 5: Generic suggestions. 0: No suggestions."
      },
      "expected_iterations": 20,
      "min_files_to_read": 25,
      "target_context_tokens": 50000,
      "metadata": {
        "min_tokens": 50000,
        "requires_git": true
      }
    },
    {
      "id": "dependency_audit",
      "name": "Dependency and Compatibility Audit",
      "prompt": "Clone https://github.com/microsoft-foundry/ai-tutorials and perform a thorough dependency and compatibility audit.\n\nSTEP 1: Clone the repository\n- git clone https://github.com/microsoft-foundry/ai-tutorials\n- Confirm successful clone\n\nSTEP 2: Find all dependency specifications\n- Search for requirements.txt files\n- Search for pyproject.toml files\n- Search for setup.py files\n- Search for environment.yml files\n- Check imports in Python files for implicit dependencies\n\nSTEP 3: Analyze each dependency\nFor EVERY dependency found:\n1. Current version specified (or 'unpinned' if none)\n2. Latest available version\n3. Known security vulnerabilities\n4. Compatibility with Python 3.10, 3.11, 3.12\n5. Transitive dependencies introduced\n\nSTEP 4: Generate audit report\n- Dependency tree visualization (text format)\n- Security vulnerabilities found with severity\n- Version conflicts or incompatibilities\n- Recommendations for updates\n- Suggested requirements.txt with pinned versions\n\nRead all relevant files. Be thorough and specific.",
      "category": "context_stress",
      "eval_criteria": ["clone_success", "dependency_discovery", "analysis_depth", "actionable_report"],
      "rubric": {
        "clone_success": "10: Repository was successfully cloned. 0: Clone failed.",
        "dependency_discovery": "10: All dependency specifications were found and analyzed. 5: Most found. 0: Few found.",
        "analysis_depth": "10: Each dependency was analyzed for versions and compatibility. 5: Basic analysis. 0: Just listing.",
        "actionable_report": "10: Report includes specific version recommendations. 5: Generic recommendations. 0: No recommendations."
      },
      "expected_iterations": 18,
      "min_files_to_read": 20,
      "target_context_tokens": 45000,
      "metadata": {
        "min_tokens": 45000,
        "requires_git": true
      }
    },
    {
      "id": "architecture_analysis",
      "name": "Architecture and Design Pattern Analysis",
      "prompt": "Clone https://github.com/microsoft-foundry/ai-tutorials and analyze the overall architecture and design patterns.\n\nSTEP 1: Clone the repository\n- git clone https://github.com/microsoft-foundry/ai-tutorials\n- Verify clone success\n\nSTEP 2: Map the repository structure\n- Create a complete directory tree\n- Identify major components/modules\n- Document file organization patterns\n\nSTEP 3: Analyze design patterns\nFor EACH significant code file:\n1. Read the complete file\n2. Identify design patterns used (factory, singleton, observer, etc.)\n3. Note coding conventions and style\n4. Document error handling approaches\n5. Analyze how components interact\n\nSTEP 4: Create architecture document\n- High-level architecture diagram (text format)\n- Component interaction map\n- Data flow descriptions\n- Design pattern catalog with examples from code\n- Evaluation of architectural decisions\n- Suggestions for architectural improvements\n\nRead every file. Document patterns with specific code references.",
      "category": "architecture",
      "eval_criteria": ["clone_success", "structure_mapped", "patterns_identified", "architecture_doc"],
      "rubric": {
        "clone_success": "10: Repository was successfully cloned. 0: Clone failed.",
        "structure_mapped": "10: Complete directory structure documented. 5: Partial structure. 0: No structure documented.",
        "patterns_identified": "10: Design patterns identified with specific code examples. 5: Patterns named without examples. 0: No patterns identified.",
        "architecture_doc": "10: Architecture document is comprehensive and accurate. 5: Basic document. 0: No architecture document."
      },
      "expected_iterations": 22,
      "min_files_to_read": 30,
      "target_context_tokens": 55000,
      "metadata": {
        "min_tokens": 55000,
        "requires_git": true
      }
    }
  ]
}
